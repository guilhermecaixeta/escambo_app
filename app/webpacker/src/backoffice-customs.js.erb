import Chart from "chart.js/auto";
import { DataTable } from "simple-datatables.min.js";

document.addEventListener('turbolinks:load', () => {
    if (document.getElementById("line_chart")) {
        let ctx = document.getElementById("line_chart").getContext("2d");
        new Chart(ctx, {
            type: "line",
            data: {
                // labels: JSON.parse(ctx.canvas.dataset.labels),

                labels: ["Jan", "Feb", "Mar"],
                datasets: [{
                    // data: JSON.parse(ctx.canvas.dataset.data),
                    data: [10, 25, 5]
                }]
            }
        });
    }

    if (document.getElementById("datatablesSimple")) {
        new DataTable("#datatablesSimple");
    }
});

document.addEventListener('ajax:complete',function (event) {
  var xhr = event.detail[0]
  if ((xhr.getResponseHeader('Content-Type') || '').substring(0, 9) === 'text/html') {
    var referrer = window.location.href
    var snapshot = Turbolinks.Snapshot.wrap(xhr.response)
    Turbolinks.controller.cache.put(referrer, snapshot)
    Turbolinks.visit(referrer, { action: 'restore' })
  }
}, false)